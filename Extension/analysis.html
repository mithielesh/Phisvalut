<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhishVault - Security Analysis</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="analysis.css">
</head>
<body>
    <!-- Side Navigation -->
    <nav class="side-nav" id="sideNav">
        <div class="side-nav-header">
            <img src="https://picsum.photos/seed/phishvault/40/40.jpg" alt="PhishVault Logo">
            <h3>PhishVault</h3>
        </div>
        <div class="nav-items">
            <div class="nav-item active" data-view="analysis">
                <i class="fas fa-shield-alt"></i> <span>Security Analysis</span>
            </div>
            <div class="nav-item" data-view="ai-chat">
                <i class="fas fa-robot"></i> <span>AI Assistant</span>
            </div>
            <div class="nav-item" data-view="history">
                <i class="fas fa-history"></i> <span>Scan History</span>
            </div>
            <div class="nav-item" data-view="settings">
                <i class="fas fa-cog"></i> <span>Settings</span>
            </div>
        </div>
        <div class="theme-toggle-container">
            <span class="theme-label">Dark Mode</span>
            <label class="switch">
                <input type="checkbox" id="globalDarkModeToggle">
                <span class="slider round"></span>
            </label>
        </div>
    </nav>

    <!-- Analysis View -->
    <div class="analysis-container main-content" id="mainContent">
        <header>
            <div class="logo-container">
                <img src="https://picsum.photos/seed/phishvault/40/40.jpg" alt="PhishVault Logo" class="logo">
                <h1>PhishVault Security Analysis</h1>
            </div>
        </header>
        <div class="site-info-container">
            <div class="site-info">
                <div class="url-display">
                    <span id="analyzed-url">Loading...</span>
                    <button id="copy-url" title="Copy URL"><i class="fas fa-copy"></i></button>
                </div>
                <div class="scan-timestamp" id="scan-timestamp">Scan time: Loading...</div>
            </div>
            <div class="security-score-container">
                <div class="security-score">
                    <span id="security-score">?</span>/10
                </div>
                <div class="score-label" id="score-label">Calculating...</div>
            </div>
        </div>
        <div class="tabs">
            <button class="tab-button active" data-tab="summary">Summary</button>
            <button class="tab-button" data-tab="details">Detailed Findings</button>
            <button class="tab-button" data-tab="recommendations">Recommendations</button>
            <button class="tab-button" data-tab="technical">Technical Details</button>
        </div>
        <div class="tab-content">
            <div class="tab-pane active" id="summary">
                <div class="loading-container" id="loading-analysis">
                    <div class="loading-spinner"></div>
                    <p>Analyzing website security...</p>
                    <p class="loading-subtext">This may take a few moments</p>
                </div>
                <div id="summary-content" class="content-section hidden">
                    <!-- Summary content will be populated here -->
                </div>
            </div>
            <div class="tab-pane" id="details">
                <div id="details-content" class="content-section">
                    <!-- Details content will be populated here -->
                </div>
            </div>
            <div class="tab-pane" id="recommendations">
                <div id="recommendations-content" class="content-section">
                    <!-- Recommendations content will be populated here -->
                </div>
            </div>
            <div class="tab-pane" id="technical">
                <div id="technical-content" class="content-section">
                    <!-- Technical details will be populated here -->
                </div>
            </div>
        </div>
        <div class="scan-stats">
            <div class="stat-item">
                <i class="fas fa-file-alt"></i>
                <span id="pages-scanned">0</span>
                <span class="stat-label">Pages</span>
            </div>
            <div class="stat-item">
                <i class="fas fa-list"></i>
                <span id="forms-found">0</span>
                <span class="stat-label">Forms</span>
            </div>
            <div class="stat-item">
                <i class="fas fa-link"></i>
                <span id="links-discovered">0</span>
                <span class="stat-label">Links</span>
            </div>
            <div class="stat-item">
                <i class="fas fa-exclamation-triangle"></i>
                <span id="security-issues">0</span>
                <span class="stat-label">Issues</span>
            </div>
        </div>
        <div class="action-buttons">
            <button id="rescan-btn" class="action-button"><i class="fas fa-sync"></i> Rescan</button>
            <button id="export-pdf-btn" class="action-button"><i class="fas fa-file-pdf"></i> Export Report</button>
            <button id="return-btn" class="action-button"><i class="fas fa-arrow-left"></i> Return</button>
        </div>
        <footer>
            <p>PhishVault Security Analysis Engine â€¢ Powered by AI</p>
        </footer>
    </div>

    <!-- AI Chat View -->
    <div class="ai-chat-container main-content" id="aiChatView" style="display: none;">
        <header>
            <div class="logo-container">
                <img src="https://picsum.photos/seed/phishvault/40/40.jpg" alt="PhishVault Logo" class="logo">
                <h1>PhishVault AI Assistant</h1>
            </div>
        </header>
        <div class="chat-interface">
            <div class="chat-messages" id="chatMessages">
                <div class="chat-message ai-message">
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <p>Hello! I'm your PhishVault AI Assistant. I can help explain security findings and answer questions about potential phishing threats. How can I help you today?</p>
                    </div>
                </div>
            </div>
            <div class="chat-input-container">
                <textarea id="chatInput" placeholder="Ask me about the security analysis or any phishing concerns..."></textarea>
                <button id="sendChatBtn">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- History View -->
    <div class="history-container main-content" id="historyView" style="display: none;">
        <header>
            <h1>Scan History</h1>
        </header>
        <div class="history-controls">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="history-search" placeholder="Search history...">
            </div>
            <button id="clear-history-btn" class="action-button"><i class="fas fa-trash"></i> Clear History</button>
        </div>
        <div class="history-list" id="historyList">
            <!-- History items will be populated here -->
        </div>
    </div>

    <!-- Settings View -->
    <div class="settings-container main-content" id="settingsView" style="display: none;">
        <header>
            <h1>Settings</h1>
        </header>
        <div class="settings-form">
            <div class="settings-section">
                <h2>API Configuration</h2>
                <div class="form-group">
                    <label for="google-api-key">Google API Key (for Gemini)</label>
                    <input type="password" id="google-api-key" placeholder="Enter your Google API key">
                    <div class="description">This key is used to power the AI analysis features. It is stored locally and never sent to our servers.</div>
                </div>
            </div>
            <div class="settings-section">
                <h2>Scan Settings</h2>
                <div class="checkbox-group">
                    <input type="checkbox" id="auto-scan">
                    <label for="auto-scan">Enable automatic scanning when visiting new sites</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="deep-scan">
                    <label for="deep-scan">Enable deep scanning (slower but more thorough)</label>
                </div>
            </div>
            <div class="settings-section">
                <h2>Notification Settings</h2>
                <div class="checkbox-group">
                    <input type="checkbox" id="notify-high-risk">
                    <label for="notify-high-risk">Notify on high-risk sites</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="notify-scan-complete">
                    <label for="notify-scan-complete">Notify when scan is complete</label>
                </div>
            </div>
            <div class="settings-section">
                <h2>Appearance</h2>
                <div class="form-group">
                    <label for="theme-color">Theme Color</label>
                    <select id="theme-color">
                        <option value="blue">Blue (Default)</option>
                        <option value="purple">Purple</option>
                        <option value="green">Green</option>
                        <option value="red">Red</option>
                    </select>
                </div>
            </div>
            <button id="save-settings-btn" class="save-settings-btn">Save Settings</button>
        </div>
    </div>

    <script src="analysis.js"></script>
</body>
</html>